# Story 1.1: Vykreslit mřížku a střídání tahů

## Story ID
1.1

## Title
Vykreslit mřížku a střídání tahů

## Epic
1

## Status
Completed

## Description
Implementace základního UI a logiky pro:
- Vykreslení mřížky 15×15 v HTML/CSS
- Klikání na pole a střídání tahů (X/O)
- Blokování kliknutí na obsazená pole
- Indikátor "Na tahu: X/O"

## Functional Requirements Covered
- FR1: Zobrazit mřížku 15×15
- FR2: Střídání X/O od prvního tahu X
- FR3: Blokovat klik na obsazené pole
- FR7: Indikátor "Na tahu: X|O"

## Acceptance Criteria

- AC1.1: Mřížka 15×15 je vykreslena v HTML a stylována CSS
- AC1.2: Po kliknutí se v poli zobrazí X nebo O v pořadí (X→O→X→...)
- AC1.3: Kliknutí na obsazené pole nemá efekt
- AC1.4: Indikátor ukazuje, který hráč je na tahu
- AC1.5: Tahy se ukládají do game state (pole s hodnotou X/O)

## File List

### New Files
- `src/index.html` - HTML struktura s divem pro mřížku (IMPLEMENTED ✓)
- `src/styles.css` - Stylování mřížky a UI (IMPLEMENTED ✓)
- `src/game.js` - Logika hry (state, tahy, indikátor) (IMPLEMENTED ✓)
- `src/game.test.js` - Unit testy (20 testů) (IMPLEMENTED ✓)
- `src/game.integration.test.js` - Integration testy (19 testů) (IMPLEMENTED ✓)
- `package.json` - NPM konfigurace a závislosti (IMPLEMENTED ✓)
- `vitest.config.js` - Konfigurace testovacího frameworku (IMPLEMENTED ✓)
- `vite.config.js` - Konfigurace Vite dev serveru (IMPLEMENTED ✓)
- `README.md` - Projektová dokumentace (IMPLEMENTED ✓)
- `MANUAL_TESTING.md` - Návod na manuální testování (IMPLEMENTED ✓)

### Modified Files
None

## Test Plan

### Unit Tests (src/game.test.js)
- Test: Iniciace game statu (15×15 polí, všechna prázdná)
- Test: Přidání tahu X na pozici (0,0) → správná změna state
- Test: Přidání tahu O na pozici (1,1) → správná změna state
- Test: Střídání tahů (X→O→X→...)
- Test: Blokování tahu na obsazené pole
- Test: Reset hry (state → prázdná mřížka)

### Integration Tests (src/game.integration.test.js)
- Test: Kliknutí na pole v UI → změna renderu
- Test: Indikátor se aktualizuje po každém tahu
- Test: Série tahů (X→O→X→...) se správně renderuje

### Manual Testing
- [ ] Klikám na pole → zobrazí se X/O
- [ ] Klikám na obsazené pole → nic se nestane
- [ ] Indikátor ukazuje správného hráče
- [ ] Test na mobilu (Chrome DevTools 375px) - UI je čitelné

## Risk Assessment

**Risk 1:** DOM manipulace může být pomalá na starších zařízeních
- Mitigation: Efektivní event delegation, minimal reflow

**Risk 2:** Návrh mřížky nemusí být optimální
- Mitigation: Review s UX expertem před implementací

## Technical Notes

### Architecture
- Vanilla JS (bez framework) pro MVP
- Game state = 2D array `[[X,O,null,...], ...]`
- Event listeners na kontejner (delegation)

### Performance Considerations
- Minimální rerendering (update jen změněné pole)
- CSS Grid pro layout

## Definition of Done

- [x] Kód napsaný a testovaný (unit + integration)
- [x] Všechny testy zelené (39/39 passed)
- [x] Responsivní design implementován (360px, 768px, 1440px)
- [x] Story validace vůči AC - všechna AC splněna
- [ ] Code review (peer review) - čeká na review

## Comments

MVP přístup - bez optimalizací, bez animací.

## Implementation Summary

### Test Results
```
✓ src/game.test.js (20 tests) 16ms
✓ src/game.integration.test.js (19 tests) 132ms

Test Files  2 passed (2)
     Tests  39 passed (39)
```

### Acceptance Criteria - Status
- ✓ AC1.1: Mřížka 15×15 vykreslena pomocí CSS Grid, responzivní pro 360-1440px
- ✓ AC1.2: Střídání X→O→X implementováno v TicTacToeGame.makeMove()
- ✓ AC1.3: Blokování obsazených polí pomocí isCellOccupied() kontroly
- ✓ AC1.4: Indikátor "Na tahu: X/O" se aktualizuje po každém tahu
- ✓ AC1.5: Game state je 2D array 15×15 s hodnotami null/'X'/'O'

### Architecture Implemented
- **TicTacToeGame Class**: Obsahuje veškerou herní logiku (state management, validace tahů, střídání hráčů)
- **GameUI Class**: Řídí DOM manipulaci a event handling
- **Event Delegation**: Jeden listener na grid container místo 225 listenerů
- **Minimal Rerendering**: Update pouze změněných polí, ne celé mřížky

### How to Run
```bash
npm install
npm run dev  # Dev server na http://localhost:5173
npm test     # Spustit všechny testy
```

### Next Steps
Story 1.1 je kompletní. Následující story by měly zahrnovat:
- Detekci výhry (5 v řadě horizontálně/vertikálně/diagonálně)
- Zvýraznění výherní kombinace
- Game over stav
- Restart funkce po výhře
