# Story 4.4: UI Refactoring - Fieldset & Select Controls

## Epic
Epic 4: Design & UI Refresh

## User Story

Jako uživatel
Chci vidět ovládací prvky (překážky a reset) seskupené v intuitivní grupě
Chci vybrat překážky z dropdownu místo checkboxu
Abych měl lepší UX a připravit se na více budoucích nastavení

## Description

Refactor UI ovládacích prvků:

1. Obklopit `.controls` (checkbox/select + tlačítko) divem s designem fieldset (border, padding, label)
2. Změnit checkbox "Chci překážky" na `<select>` s volbami:
   - "Bez překážek" (value: "no")
   - "S překážkami" (value: "yes")
3. Aktualizovat JavaScript pro čtení ze selectu
4. Zachovat veškerou funkčnost

## Tasks

- [ ] Vytvořit story dokument
- [ ] Upravit HTML - přidat wrapper fieldset div, změnit checkbox na select
- [ ] Upravit CSS - stylovat fieldset div s legenda-like designem
- [ ] Upravit JavaScript - čtení z selectu místo checkboxu
- [ ] Aktualizovat testy - testovat nový select
- [ ] Testovat funkčnost a UI

## Acceptance Criteria

1. **AC1:** Ovládací prvky jsou obklopeny divem se stylem fieldset (border + padding)
2. **AC2:** Div má vizuální "legendu" s textem "Nastavení" nebo "Možnosti"
3. **AC3:** Checkbox je změněn na select s volbami "Bez překážek" a "S překážkami"
4. **AC4:** JavaScript správně čte hodnotu z selectu
5. **AC5:** Překážky se vypínat/zapínají správně přes select
6. **AC6:** Všechny testy procházejí
7. **AC7:** Build je úspěšný

## Test Plan

### Visual Testing
- [ ] Fieldset div má viditelný border a padding
- [ ] Select je přehledný a funkční
- [ ] Responsive design zachován (mobile, tablet, desktop)

### Functional Testing
- [ ] Select "Bez překážek" vypne překážky a resetuje hru
- [ ] Select "S překážkami" zapne překážky a resetuje hru
- [ ] Výběr selectu není zapamtován (zatím - bude v 4.5)

### Automated Testing
- [ ] Všechny testy procházejí (111/111)
- [ ] Build je bez chyb

## Files Changed

### Modified Files
- `src/index.html` - Přidat fieldset div, změnit checkbox na select
- `src/styles.css` - Stylovat fieldset div (border, padding, label-like design)
- `src/game.js` - Změnit checkbox event listener na select listener

### Test Files
- `src/game.integration.test.js` - Aktualizovat testy pro select (zatím ne - jsou na checkboxu)

## Technical Notes

### HTML Changes
```html
<!-- BEFORE -->
<div class="controls">
  <label class="obstacle-toggle">
    <input type="checkbox" id="obstaclesCheckbox" />
    <span>Chci překážky</span>
  </label>
  <button class="reset-button">Nová hra</button>
</div>

<!-- AFTER -->
<div class="controls-fieldset">
  <div class="controls-legend">Nastavení</div>
  <div class="controls">
    <div class="obstacle-select-group">
      <label for="obstaclesSelect">Překážky:</label>
      <select id="obstaclesSelect">
        <option value="no">Bez překážek</option>
        <option value="yes">S překážkami</option>
      </select>
    </div>
    <button class="reset-button">Nová hra</button>
  </div>
</div>
```

### CSS Changes
```css
.controls-fieldset {
  border: 1px solid #ddd;
  border-radius: 0.5rem;
  padding: 1rem;
  margin: 1rem 0;
}

.controls-legend {
  font-size: 0.9rem;
  font-weight: 600;
  color: #666;
  margin-bottom: 0.5rem;
  padding-left: 0.5rem;
}

.controls {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.obstacle-select-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.obstacle-select-group label {
  font-size: 0.9rem;
  color: #333;
  font-weight: 500;
}

.obstacle-select-group select {
  padding: 0.5rem;
  border: 1px solid #ccc;
  border-radius: 0.3rem;
  font-size: 0.95rem;
  cursor: pointer;
  background: white;
}

.obstacle-select-group select:hover {
  border-color: #999;
}

.obstacle-select-group select:focus {
  outline: none;
  border-color: #EB5E00;
  box-shadow: 0 0 3px rgba(235, 94, 0, 0.3);
}
```

### JavaScript Changes
```javascript
// BEFORE
this.obstaclesCheckbox.addEventListener('change', (e) => {
  this.game.toggleObstacles(e.target.checked);
});

// AFTER
this.obstaclesSelect.addEventListener('change', (e) => {
  const enableObstacles = e.target.value === 'yes';
  this.game.toggleObstacles(enableObstacles);
});
```

## Risk Assessment

**Risk 1:** Změna HTML struktury může ovlivnit responsivitu
- **Mitigation:** Testovat na všech breakpointech

**Risk 2:** JavaScript change listeners se mohou rozbít
- **Mitigation:** Komplexní testování funkčnosti

## Definition of Done

- [ ] Story dokument napsán a vyplněn
- [ ] HTML, CSS, JavaScript upraveny
- [ ] Fieldset div stylován konzistentně s aplikací
- [ ] Select funkční a přehledný
- [ ] Visually testováno (desktop, tablet, mobile)
- [ ] Všechny testy procházejí ✓
- [ ] Build úspěšný ✓
- [ ] Commit vytvořen

## Status

Draft → In Progress → Completed

---

**Created:** 2025-11-02
**Epic:** 4 - Design & UI Refresh
**Priority:** High
**Effort:** S (30-45 minutes)
**Depends on:** 4.3 ✓
**Prerequisite for:** 4.5
