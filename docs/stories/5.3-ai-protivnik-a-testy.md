# Story 5.3: AI protivník a testy herních režimů

## Epic
Epic 5: Přepínač herních režimů

## Uživatelský příběh

Jako hráč, který nemá druhého protihráče
Chci si zahrát proti počítači
Abych si mohl hru užít i sám a trénovat strategie

## Popis

Implementovat základního AI protivníka, který provádí platné tahy v režimu "Hráč vs. počítač". AI by měla reagovat v rozumném čase, minimalizovat neplatné tahy a nabízet konzistentní obtížnost (např. heuristika podle volných polí nebo náhodný výběr s preferencemi). Zároveň je potřeba pokrýt logiku testy, které ověří oba režimy, a zajistit, že stávající PVP chování se nezhorší.

## Úkoly

### Úkol 1: Implementace AI tahu (např. `src/logic/ai.ts`)
- [ ] Vytvořit modul/funkci pro výběr dalšího tahu AI
- [ ] Zajistit, že AI nikdy nevybere obsazené pole
- [ ] Přidat možnost deterministického fallbacku pro účely testů

### Úkol 2: Integrace s herním cyklem
- [ ] Napojit AI na logiku tahu v režimu proti počítači
- [ ] Vyřešit časování (např. krátké zpoždění pro UX, práce s `setTimeout`)
- [ ] Zachovat možnost hráče resetovat hru během AI tahu

### Úkol 3: Automatizované testy
- [ ] Přidat jednotkové testy pro AI výběr tahu
- [ ] Přidat integrační test pro přepínač režimu a průběh hry proti AI
- [ ] Ověřit, že testy pro PVP režim (stávající nebo nové) stále procházejí

## Akceptační kritéria

1. AI vždy provádí pouze platné tahy a neblokuje UI
2. Tah AI proběhne v rámci stanoveného limitu (např. < 1 s)
3. Existuje deterministická cesta pro testování výsledků (např. seedované RNG)
4. Automatické testy pokrývají oba režimy a běží ve CI
5. PVP režim se chová shodně jako před implementací AI

## Testovací plán

1. Spustit jednotkové testy AI logiky a ověřit deterministické výsledky
2. Spustit integrační testy, které simulují střídání hráč/AI
3. Ručně odehrát několik kol proti AI a sledovat chování při resetu a přepnutí režimu
4. Ověřit výkon: přepnout na AI režim a sledovat odezvu UI
5. Zkontrolovat, že PVP režim není ovlivněn (ruční průchod + regresní testy)

## Poznámky

- V případě náhodnosti použít seedované RNG nebo pseudo-náhodu se sledovatelným výstupem
- Promyslet, zda AI může vyhrávat/prehávat s určitou strategií, ale vyhnout se příliš složité implementaci
- Zajistit, že testy jsou stabilní a neflakují
